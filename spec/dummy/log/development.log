  [1m[35m (5.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (8.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35mSQL (7.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (0.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_content_items" CASCADE[0m
  [1m[35m (70.4ms)[0m  [1m[35mCREATE TABLE "cortex_content_items" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "state" character varying, "content_type_id" uuid NOT NULL, "tenant_id" uuid NOT NULL, "creator_id" uuid NOT NULL, "updated_by_id" uuid, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_content_type_id" ON "cortex_content_items"  ("content_type_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_creator_id" ON "cortex_content_items"  ("creator_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_deleted_at" ON "cortex_content_items"  ("deleted_at")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_state" ON "cortex_content_items"  ("state")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_tenant_id" ON "cortex_content_items"  ("tenant_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_updated_by_id" ON "cortex_content_items"  ("updated_by_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_content_types" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "cortex_content_types" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying NOT NULL, "name_id" character varying NOT NULL, "description" text, "creator_id" uuid NOT NULL, "tenant_id" uuid NOT NULL, "contract_id" uuid NOT NULL, "publishable" boolean DEFAULT 'f' NOT NULL, "icon" character varying DEFAULT 'help', "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_contract_id" ON "cortex_content_types"  ("contract_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_creator_id" ON "cortex_content_types"  ("creator_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_deleted_at" ON "cortex_content_types"  ("deleted_at")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_name" ON "cortex_content_types"  ("name")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_name_id" ON "cortex_content_types"  ("name_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_tenant_id" ON "cortex_content_types"  ("tenant_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_contentable_decorators" CASCADE[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "cortex_contentable_decorators" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "decorator_id" uuid, "contentable_type" character varying, "contentable_id" uuid, "tenant_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contentable_decorators_on_contentable" ON "cortex_contentable_decorators"  ("contentable_type", "contentable_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contentable_decorators_on_decorator_id" ON "cortex_contentable_decorators"  ("decorator_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contentable_decorators_on_deleted_at" ON "cortex_contentable_decorators"  ("deleted_at")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contentable_decorators_on_tenant_id" ON "cortex_contentable_decorators"  ("tenant_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_contracts" CASCADE[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "cortex_contracts" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying NOT NULL, "tenant_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contracts_on_deleted_at" ON "cortex_contracts"  ("deleted_at")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contracts_on_name" ON "cortex_contracts"  ("name")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contracts_on_tenant_id" ON "cortex_contracts"  ("tenant_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_decorators" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "cortex_decorators" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying NOT NULL, "data" jsonb DEFAULT '{}' NOT NULL, "tenant_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_decorators_on_deleted_at" ON "cortex_decorators"  ("deleted_at")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_decorators_on_name" ON "cortex_decorators"  ("name")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_decorators_on_tenant_id" ON "cortex_decorators"  ("tenant_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_field_items" CASCADE[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "cortex_field_items" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "data" jsonb DEFAULT '{}' NOT NULL, "field_id" uuid NOT NULL, "content_item_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_field_items_on_content_item_id" ON "cortex_field_items"  ("content_item_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_field_items_on_data" ON "cortex_field_items" USING gin ("data")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_field_items_on_deleted_at" ON "cortex_field_items"  ("deleted_at")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_field_items_on_field_id" ON "cortex_field_items"  ("field_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_field_types" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "cortex_field_types" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_fields" CASCADE[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "cortex_fields" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying NOT NULL, "name_id" character varying NOT NULL, "field_type" character varying NOT NULL, "metadata" jsonb DEFAULT '{}' NOT NULL, "validations" jsonb DEFAULT '{}' NOT NULL, "content_type_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_content_type_id" ON "cortex_fields"  ("content_type_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_deleted_at" ON "cortex_fields"  ("deleted_at")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_field_type" ON "cortex_fields"  ("field_type")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_name" ON "cortex_fields"  ("name")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_name_id" ON "cortex_fields"  ("name_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_flipper_features" CASCADE[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "cortex_flipper_features" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "key" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_flipper_features_on_key" ON "cortex_flipper_features"  ("key")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_flipper_gates" CASCADE[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "cortex_flipper_gates" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "feature_key" character varying NOT NULL, "key" character varying NOT NULL, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_flipper_gates_on_feature_key" ON "cortex_flipper_gates"  ("feature_key")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_flipper_gates_on_key" ON "cortex_flipper_gates"  ("key")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_flipper_gates_on_value" ON "cortex_flipper_gates"  ("value")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_permissions" CASCADE[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "cortex_permissions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "resource_type" character varying, "resource_id" uuid, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_on_deleted_at" ON "cortex_permissions"  ("deleted_at")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_on_name" ON "cortex_permissions"  ("name")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_on_resource_id" ON "cortex_permissions"  ("resource_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_on_resource_type" ON "cortex_permissions"  ("resource_type")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_permissions_roles" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "cortex_permissions_roles" ("permission_id" uuid NOT NULL, "role_id" uuid NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_roles_on_permission_id" ON "cortex_permissions_roles"  ("permission_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_roles_on_role_id" ON "cortex_permissions_roles"  ("role_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_roles" CASCADE[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "cortex_roles" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "resource_type" character varying, "resource_id" uuid, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_on_deleted_at" ON "cortex_roles"  ("deleted_at")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_on_name" ON "cortex_roles"  ("name")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_on_resource_type_and_resource_id" ON "cortex_roles"  ("resource_type", "resource_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_roles_users" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "cortex_roles_users" ("role_id" uuid NOT NULL, "user_id" uuid NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_users_on_role_id" ON "cortex_roles_users"  ("role_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_users_on_user_id" ON "cortex_roles_users"  ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_tenants" CASCADE[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "cortex_tenants" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying(50) NOT NULL, "name_id" character varying NOT NULL, "description" text, "parent_id" uuid, "lft" integer, "rgt" integer, "depth" integer, "deleted_at" timestamp, "active_at" timestamp, "deactive_at" timestamp, "owner_id" uuid, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_on_deleted_at" ON "cortex_tenants"  ("deleted_at")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_tenants_on_name" ON "cortex_tenants"  ("name")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_tenants_on_name_id" ON "cortex_tenants"  ("name_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_on_owner_id" ON "cortex_tenants"  ("owner_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_on_parent_id" ON "cortex_tenants"  ("parent_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_tenants_users" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "cortex_tenants_users" ("tenant_id" uuid NOT NULL, "user_id" uuid NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_users_on_tenant_id" ON "cortex_tenants_users"  ("tenant_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_users_on_user_id" ON "cortex_tenants_users"  ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_users" CASCADE[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "cortex_users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "email" character varying DEFAULT '' NOT NULL, "firstname" character varying NOT NULL, "lastname" character varying NOT NULL, "locale" character varying(30) DEFAULT 'en_US' NOT NULL, "timezone" character varying(30) DEFAULT 'EST' NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "active_tenant_id" uuid, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying, "last_sign_in_ip" character varying)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_users_on_active_tenant_id" ON "cortex_users"  ("active_tenant_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_users_on_deleted_at" ON "cortex_users"  ("deleted_at")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_users_on_email" ON "cortex_users"  ("email")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_users_on_reset_password_token" ON "cortex_users"  ("reset_password_token")[0m
  [1m[35m (28.1ms)[0m  [1m[35mALTER TABLE "cortex_content_items" ADD CONSTRAINT "fk_rails_a0e0a401c2"
FOREIGN KEY ("content_type_id")
  REFERENCES "cortex_content_types" ("id")
[0m
  [1m[35m (8.6ms)[0m  [1m[35mALTER TABLE "cortex_content_items" ADD CONSTRAINT "fk_rails_017f0081f9"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (7.5ms)[0m  [1m[35mALTER TABLE "cortex_content_items" ADD CONSTRAINT "fk_rails_b4ecc1a4a7"
FOREIGN KEY ("creator_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "cortex_content_items" ADD CONSTRAINT "fk_rails_3cdc70a556"
FOREIGN KEY ("updated_by_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (7.0ms)[0m  [1m[35mALTER TABLE "cortex_content_types" ADD CONSTRAINT "fk_rails_60074af220"
FOREIGN KEY ("contract_id")
  REFERENCES "cortex_contracts" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "cortex_content_types" ADD CONSTRAINT "fk_rails_210f129915"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "cortex_content_types" ADD CONSTRAINT "fk_rails_db798ae410"
FOREIGN KEY ("creator_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (15.6ms)[0m  [1m[35mALTER TABLE "cortex_contentable_decorators" ADD CONSTRAINT "fk_rails_ba6a88b4e9"
FOREIGN KEY ("decorator_id")
  REFERENCES "cortex_decorators" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "cortex_contentable_decorators" ADD CONSTRAINT "fk_rails_6a305dd5e7"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "cortex_contracts" ADD CONSTRAINT "fk_rails_d7e02b8da3"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "cortex_decorators" ADD CONSTRAINT "fk_rails_d799512aaf"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (7.9ms)[0m  [1m[35mALTER TABLE "cortex_field_items" ADD CONSTRAINT "fk_rails_21cd780dfa"
FOREIGN KEY ("content_item_id")
  REFERENCES "cortex_content_items" ("id")
[0m
  [1m[35m (8.9ms)[0m  [1m[35mALTER TABLE "cortex_field_items" ADD CONSTRAINT "fk_rails_c8a7c76f32"
FOREIGN KEY ("field_id")
  REFERENCES "cortex_fields" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "cortex_fields" ADD CONSTRAINT "fk_rails_7b193fea4e"
FOREIGN KEY ("content_type_id")
  REFERENCES "cortex_content_types" ("id")
[0m
  [1m[35m (15.0ms)[0m  [1m[35mALTER TABLE "cortex_permissions_roles" ADD CONSTRAINT "fk_rails_83fc5ca812"
FOREIGN KEY ("permission_id")
  REFERENCES "cortex_permissions" ("id")
[0m
  [1m[35m (8.1ms)[0m  [1m[35mALTER TABLE "cortex_permissions_roles" ADD CONSTRAINT "fk_rails_837826ce44"
FOREIGN KEY ("role_id")
  REFERENCES "cortex_roles" ("id")
[0m
  [1m[35m (6.4ms)[0m  [1m[35mALTER TABLE "cortex_roles_users" ADD CONSTRAINT "fk_rails_b8b25dbcb7"
FOREIGN KEY ("role_id")
  REFERENCES "cortex_roles" ("id")
[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "cortex_roles_users" ADD CONSTRAINT "fk_rails_fd7eb9e6ab"
FOREIGN KEY ("user_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "cortex_tenants" ADD CONSTRAINT "fk_rails_484d1d2b2e"
FOREIGN KEY ("owner_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (4.1ms)[0m  [1m[35mALTER TABLE "cortex_tenants_users" ADD CONSTRAINT "fk_rails_9bd0ae910c"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "cortex_tenants_users" ADD CONSTRAINT "fk_rails_3f3682131f"
FOREIGN KEY ("user_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "cortex_users" ADD CONSTRAINT "fk_rails_a08c46d6e5"
FOREIGN KEY ("active_tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180118233014)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180118233001),
(20180118233002),
(20180118233003),
(20180118233004),
(20180118233005),
(20180118233006),
(20180118233007),
(20180118233008),
(20180118233009),
(20180118233010),
(20180118233011),
(20180118233012),
(20180118233013);

[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto"[0m
  [1m[35m (9.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_content_items" CASCADE[0m
  [1m[35m (13.9ms)[0m  [1m[35mCREATE TABLE "cortex_content_items" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "state" character varying, "content_type_id" uuid NOT NULL, "tenant_id" uuid NOT NULL, "creator_id" uuid NOT NULL, "updated_by_id" uuid, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_content_type_id" ON "cortex_content_items"  ("content_type_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_creator_id" ON "cortex_content_items"  ("creator_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_deleted_at" ON "cortex_content_items"  ("deleted_at")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_state" ON "cortex_content_items"  ("state")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_tenant_id" ON "cortex_content_items"  ("tenant_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_updated_by_id" ON "cortex_content_items"  ("updated_by_id")[0m
  [1m[35m (4.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_content_types" CASCADE[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "cortex_content_types" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying NOT NULL, "name_id" character varying NOT NULL, "description" text, "creator_id" uuid NOT NULL, "tenant_id" uuid NOT NULL, "contract_id" uuid NOT NULL, "publishable" boolean DEFAULT 'f' NOT NULL, "icon" character varying DEFAULT 'help', "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_contract_id" ON "cortex_content_types"  ("contract_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_creator_id" ON "cortex_content_types"  ("creator_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_deleted_at" ON "cortex_content_types"  ("deleted_at")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_name" ON "cortex_content_types"  ("name")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_name_id" ON "cortex_content_types"  ("name_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_tenant_id" ON "cortex_content_types"  ("tenant_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_contentable_decorators" CASCADE[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "cortex_contentable_decorators" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "decorator_id" uuid, "contentable_type" character varying, "contentable_id" uuid, "tenant_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contentable_decorators_on_contentable" ON "cortex_contentable_decorators"  ("contentable_type", "contentable_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contentable_decorators_on_decorator_id" ON "cortex_contentable_decorators"  ("decorator_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contentable_decorators_on_deleted_at" ON "cortex_contentable_decorators"  ("deleted_at")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contentable_decorators_on_tenant_id" ON "cortex_contentable_decorators"  ("tenant_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_contracts" CASCADE[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "cortex_contracts" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying NOT NULL, "tenant_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contracts_on_deleted_at" ON "cortex_contracts"  ("deleted_at")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contracts_on_name" ON "cortex_contracts"  ("name")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contracts_on_tenant_id" ON "cortex_contracts"  ("tenant_id")[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_decorators" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "cortex_decorators" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying NOT NULL, "data" jsonb DEFAULT '{}' NOT NULL, "tenant_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_decorators_on_deleted_at" ON "cortex_decorators"  ("deleted_at")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_decorators_on_name" ON "cortex_decorators"  ("name")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_decorators_on_tenant_id" ON "cortex_decorators"  ("tenant_id")[0m
  [1m[35m (7.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_field_items" CASCADE[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "cortex_field_items" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "data" jsonb DEFAULT '{}' NOT NULL, "field_id" uuid NOT NULL, "content_item_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_field_items_on_content_item_id" ON "cortex_field_items"  ("content_item_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_field_items_on_data" ON "cortex_field_items" USING gin ("data")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_field_items_on_deleted_at" ON "cortex_field_items"  ("deleted_at")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_field_items_on_field_id" ON "cortex_field_items"  ("field_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_field_types" CASCADE[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "cortex_field_types" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_fields" CASCADE[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "cortex_fields" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying NOT NULL, "name_id" character varying NOT NULL, "field_type" character varying NOT NULL, "metadata" jsonb DEFAULT '{}' NOT NULL, "validations" jsonb DEFAULT '{}' NOT NULL, "content_type_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_content_type_id" ON "cortex_fields"  ("content_type_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_deleted_at" ON "cortex_fields"  ("deleted_at")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_field_type" ON "cortex_fields"  ("field_type")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_name" ON "cortex_fields"  ("name")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_name_id" ON "cortex_fields"  ("name_id")[0m
  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_flipper_features" CASCADE[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "cortex_flipper_features" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "key" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_flipper_features_on_key" ON "cortex_flipper_features"  ("key")[0m
  [1m[35m (10.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_flipper_gates" CASCADE[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "cortex_flipper_gates" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "feature_key" character varying NOT NULL, "key" character varying NOT NULL, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_flipper_gates_on_feature_key" ON "cortex_flipper_gates"  ("feature_key")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_flipper_gates_on_key" ON "cortex_flipper_gates"  ("key")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_flipper_gates_on_value" ON "cortex_flipper_gates"  ("value")[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_permissions" CASCADE[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "cortex_permissions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "resource_type" character varying, "resource_id" uuid, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_on_deleted_at" ON "cortex_permissions"  ("deleted_at")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_on_name" ON "cortex_permissions"  ("name")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_on_resource_id" ON "cortex_permissions"  ("resource_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_on_resource_type" ON "cortex_permissions"  ("resource_type")[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_permissions_roles" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "cortex_permissions_roles" ("permission_id" uuid NOT NULL, "role_id" uuid NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_roles_on_permission_id" ON "cortex_permissions_roles"  ("permission_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_roles_on_role_id" ON "cortex_permissions_roles"  ("role_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_roles" CASCADE[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "cortex_roles" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "resource_type" character varying, "resource_id" uuid, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_on_deleted_at" ON "cortex_roles"  ("deleted_at")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_on_name" ON "cortex_roles"  ("name")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_on_resource_type_and_resource_id" ON "cortex_roles"  ("resource_type", "resource_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_roles_users" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "cortex_roles_users" ("role_id" uuid NOT NULL, "user_id" uuid NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_users_on_role_id" ON "cortex_roles_users"  ("role_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_users_on_user_id" ON "cortex_roles_users"  ("user_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_tenants" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "cortex_tenants" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying(50) NOT NULL, "name_id" character varying NOT NULL, "description" text, "parent_id" uuid, "lft" integer, "rgt" integer, "depth" integer, "deleted_at" timestamp, "active_at" timestamp, "deactive_at" timestamp, "owner_id" uuid, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_on_deleted_at" ON "cortex_tenants"  ("deleted_at")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_tenants_on_name" ON "cortex_tenants"  ("name")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_tenants_on_name_id" ON "cortex_tenants"  ("name_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_on_owner_id" ON "cortex_tenants"  ("owner_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_on_parent_id" ON "cortex_tenants"  ("parent_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_tenants_users" CASCADE[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "cortex_tenants_users" ("tenant_id" uuid NOT NULL, "user_id" uuid NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_users_on_tenant_id" ON "cortex_tenants_users"  ("tenant_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_users_on_user_id" ON "cortex_tenants_users"  ("user_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_users" CASCADE[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "cortex_users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "email" character varying DEFAULT '' NOT NULL, "firstname" character varying NOT NULL, "lastname" character varying NOT NULL, "locale" character varying(30) DEFAULT 'en_US' NOT NULL, "timezone" character varying(30) DEFAULT 'EST' NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "active_tenant_id" uuid, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying, "last_sign_in_ip" character varying)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_users_on_active_tenant_id" ON "cortex_users"  ("active_tenant_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_users_on_deleted_at" ON "cortex_users"  ("deleted_at")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_users_on_email" ON "cortex_users"  ("email")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_users_on_reset_password_token" ON "cortex_users"  ("reset_password_token")[0m
  [1m[35m (21.7ms)[0m  [1m[35mALTER TABLE "cortex_content_items" ADD CONSTRAINT "fk_rails_a0e0a401c2"
FOREIGN KEY ("content_type_id")
  REFERENCES "cortex_content_types" ("id")
[0m
  [1m[35m (8.6ms)[0m  [1m[35mALTER TABLE "cortex_content_items" ADD CONSTRAINT "fk_rails_017f0081f9"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (10.1ms)[0m  [1m[35mALTER TABLE "cortex_content_items" ADD CONSTRAINT "fk_rails_b4ecc1a4a7"
FOREIGN KEY ("creator_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "cortex_content_items" ADD CONSTRAINT "fk_rails_3cdc70a556"
FOREIGN KEY ("updated_by_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (8.4ms)[0m  [1m[35mALTER TABLE "cortex_content_types" ADD CONSTRAINT "fk_rails_60074af220"
FOREIGN KEY ("contract_id")
  REFERENCES "cortex_contracts" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "cortex_content_types" ADD CONSTRAINT "fk_rails_210f129915"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "cortex_content_types" ADD CONSTRAINT "fk_rails_db798ae410"
FOREIGN KEY ("creator_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (13.7ms)[0m  [1m[35mALTER TABLE "cortex_contentable_decorators" ADD CONSTRAINT "fk_rails_ba6a88b4e9"
FOREIGN KEY ("decorator_id")
  REFERENCES "cortex_decorators" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "cortex_contentable_decorators" ADD CONSTRAINT "fk_rails_6a305dd5e7"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "cortex_contracts" ADD CONSTRAINT "fk_rails_d7e02b8da3"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "cortex_decorators" ADD CONSTRAINT "fk_rails_d799512aaf"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (10.0ms)[0m  [1m[35mALTER TABLE "cortex_field_items" ADD CONSTRAINT "fk_rails_21cd780dfa"
FOREIGN KEY ("content_item_id")
  REFERENCES "cortex_content_items" ("id")
[0m
  [1m[35m (9.9ms)[0m  [1m[35mALTER TABLE "cortex_field_items" ADD CONSTRAINT "fk_rails_c8a7c76f32"
FOREIGN KEY ("field_id")
  REFERENCES "cortex_fields" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "cortex_fields" ADD CONSTRAINT "fk_rails_7b193fea4e"
FOREIGN KEY ("content_type_id")
  REFERENCES "cortex_content_types" ("id")
[0m
  [1m[35m (12.9ms)[0m  [1m[35mALTER TABLE "cortex_permissions_roles" ADD CONSTRAINT "fk_rails_83fc5ca812"
FOREIGN KEY ("permission_id")
  REFERENCES "cortex_permissions" ("id")
[0m
  [1m[35m (7.7ms)[0m  [1m[35mALTER TABLE "cortex_permissions_roles" ADD CONSTRAINT "fk_rails_837826ce44"
FOREIGN KEY ("role_id")
  REFERENCES "cortex_roles" ("id")
[0m
  [1m[35m (5.8ms)[0m  [1m[35mALTER TABLE "cortex_roles_users" ADD CONSTRAINT "fk_rails_b8b25dbcb7"
FOREIGN KEY ("role_id")
  REFERENCES "cortex_roles" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "cortex_roles_users" ADD CONSTRAINT "fk_rails_fd7eb9e6ab"
FOREIGN KEY ("user_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "cortex_tenants" ADD CONSTRAINT "fk_rails_484d1d2b2e"
FOREIGN KEY ("owner_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (4.0ms)[0m  [1m[35mALTER TABLE "cortex_tenants_users" ADD CONSTRAINT "fk_rails_9bd0ae910c"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "cortex_tenants_users" ADD CONSTRAINT "fk_rails_3f3682131f"
FOREIGN KEY ("user_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "cortex_users" ADD CONSTRAINT "fk_rails_a08c46d6e5"
FOREIGN KEY ("active_tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (23.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_content_items" CASCADE[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "cortex_content_items" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "state" character varying, "content_type_id" uuid NOT NULL, "tenant_id" uuid NOT NULL, "creator_id" uuid NOT NULL, "updated_by_id" uuid, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_content_type_id" ON "cortex_content_items"  ("content_type_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_creator_id" ON "cortex_content_items"  ("creator_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_deleted_at" ON "cortex_content_items"  ("deleted_at")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_state" ON "cortex_content_items"  ("state")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_tenant_id" ON "cortex_content_items"  ("tenant_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_items_on_updated_by_id" ON "cortex_content_items"  ("updated_by_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_content_types" CASCADE[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "cortex_content_types" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying NOT NULL, "name_id" character varying NOT NULL, "description" text, "creator_id" uuid NOT NULL, "tenant_id" uuid NOT NULL, "contract_id" uuid NOT NULL, "publishable" boolean DEFAULT 'f' NOT NULL, "icon" character varying DEFAULT 'help', "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_contract_id" ON "cortex_content_types"  ("contract_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_creator_id" ON "cortex_content_types"  ("creator_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_deleted_at" ON "cortex_content_types"  ("deleted_at")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_name" ON "cortex_content_types"  ("name")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_name_id" ON "cortex_content_types"  ("name_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_content_types_on_tenant_id" ON "cortex_content_types"  ("tenant_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_contentable_decorators" CASCADE[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "cortex_contentable_decorators" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "decorator_id" uuid, "contentable_type" character varying, "contentable_id" uuid, "tenant_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contentable_decorators_on_contentable" ON "cortex_contentable_decorators"  ("contentable_type", "contentable_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contentable_decorators_on_decorator_id" ON "cortex_contentable_decorators"  ("decorator_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contentable_decorators_on_deleted_at" ON "cortex_contentable_decorators"  ("deleted_at")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contentable_decorators_on_tenant_id" ON "cortex_contentable_decorators"  ("tenant_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_contracts" CASCADE[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "cortex_contracts" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying NOT NULL, "tenant_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contracts_on_deleted_at" ON "cortex_contracts"  ("deleted_at")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contracts_on_name" ON "cortex_contracts"  ("name")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_contracts_on_tenant_id" ON "cortex_contracts"  ("tenant_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_decorators" CASCADE[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "cortex_decorators" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying NOT NULL, "data" jsonb DEFAULT '{}' NOT NULL, "tenant_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_decorators_on_deleted_at" ON "cortex_decorators"  ("deleted_at")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_decorators_on_name" ON "cortex_decorators"  ("name")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_decorators_on_tenant_id" ON "cortex_decorators"  ("tenant_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_field_items" CASCADE[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "cortex_field_items" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "data" jsonb DEFAULT '{}' NOT NULL, "field_id" uuid NOT NULL, "content_item_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_field_items_on_content_item_id" ON "cortex_field_items"  ("content_item_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_field_items_on_data" ON "cortex_field_items" USING gin ("data")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_field_items_on_deleted_at" ON "cortex_field_items"  ("deleted_at")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_field_items_on_field_id" ON "cortex_field_items"  ("field_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_field_types" CASCADE[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "cortex_field_types" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_fields" CASCADE[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "cortex_fields" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying NOT NULL, "name_id" character varying NOT NULL, "field_type" character varying NOT NULL, "metadata" jsonb DEFAULT '{}' NOT NULL, "validations" jsonb DEFAULT '{}' NOT NULL, "content_type_id" uuid NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_content_type_id" ON "cortex_fields"  ("content_type_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_deleted_at" ON "cortex_fields"  ("deleted_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_field_type" ON "cortex_fields"  ("field_type")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_name" ON "cortex_fields"  ("name")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_fields_on_name_id" ON "cortex_fields"  ("name_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_flipper_features" CASCADE[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "cortex_flipper_features" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "key" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_flipper_features_on_key" ON "cortex_flipper_features"  ("key")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_flipper_gates" CASCADE[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "cortex_flipper_gates" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "feature_key" character varying NOT NULL, "key" character varying NOT NULL, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_flipper_gates_on_feature_key" ON "cortex_flipper_gates"  ("feature_key")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_flipper_gates_on_key" ON "cortex_flipper_gates"  ("key")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_flipper_gates_on_value" ON "cortex_flipper_gates"  ("value")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_permissions" CASCADE[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "cortex_permissions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "resource_type" character varying, "resource_id" uuid, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_on_deleted_at" ON "cortex_permissions"  ("deleted_at")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_on_name" ON "cortex_permissions"  ("name")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_on_resource_id" ON "cortex_permissions"  ("resource_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_on_resource_type" ON "cortex_permissions"  ("resource_type")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_permissions_roles" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "cortex_permissions_roles" ("permission_id" uuid NOT NULL, "role_id" uuid NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_roles_on_permission_id" ON "cortex_permissions_roles"  ("permission_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_permissions_roles_on_role_id" ON "cortex_permissions_roles"  ("role_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_roles" CASCADE[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "cortex_roles" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "resource_type" character varying, "resource_id" uuid, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_on_deleted_at" ON "cortex_roles"  ("deleted_at")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_on_name" ON "cortex_roles"  ("name")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_on_resource_type_and_resource_id" ON "cortex_roles"  ("resource_type", "resource_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_roles_users" CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "cortex_roles_users" ("role_id" uuid NOT NULL, "user_id" uuid NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_users_on_role_id" ON "cortex_roles_users"  ("role_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_roles_users_on_user_id" ON "cortex_roles_users"  ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_tenants" CASCADE[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "cortex_tenants" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying(50) NOT NULL, "name_id" character varying NOT NULL, "description" text, "parent_id" uuid, "lft" integer, "rgt" integer, "depth" integer, "deleted_at" timestamp, "active_at" timestamp, "deactive_at" timestamp, "owner_id" uuid, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_on_deleted_at" ON "cortex_tenants"  ("deleted_at")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_tenants_on_name" ON "cortex_tenants"  ("name")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_tenants_on_name_id" ON "cortex_tenants"  ("name_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_on_owner_id" ON "cortex_tenants"  ("owner_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_on_parent_id" ON "cortex_tenants"  ("parent_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_tenants_users" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "cortex_tenants_users" ("tenant_id" uuid NOT NULL, "user_id" uuid NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_users_on_tenant_id" ON "cortex_tenants_users"  ("tenant_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_tenants_users_on_user_id" ON "cortex_tenants_users"  ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "cortex_users" CASCADE[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "cortex_users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "email" character varying DEFAULT '' NOT NULL, "firstname" character varying NOT NULL, "lastname" character varying NOT NULL, "locale" character varying(30) DEFAULT 'en_US' NOT NULL, "timezone" character varying(30) DEFAULT 'EST' NOT NULL, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "active_tenant_id" uuid, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying, "last_sign_in_ip" character varying)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_users_on_active_tenant_id" ON "cortex_users"  ("active_tenant_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_cortex_users_on_deleted_at" ON "cortex_users"  ("deleted_at")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_users_on_email" ON "cortex_users"  ("email")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_cortex_users_on_reset_password_token" ON "cortex_users"  ("reset_password_token")[0m
  [1m[35m (22.2ms)[0m  [1m[35mALTER TABLE "cortex_content_items" ADD CONSTRAINT "fk_rails_a0e0a401c2"
FOREIGN KEY ("content_type_id")
  REFERENCES "cortex_content_types" ("id")
[0m
  [1m[35m (10.5ms)[0m  [1m[35mALTER TABLE "cortex_content_items" ADD CONSTRAINT "fk_rails_017f0081f9"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (7.5ms)[0m  [1m[35mALTER TABLE "cortex_content_items" ADD CONSTRAINT "fk_rails_b4ecc1a4a7"
FOREIGN KEY ("creator_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "cortex_content_items" ADD CONSTRAINT "fk_rails_3cdc70a556"
FOREIGN KEY ("updated_by_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (5.7ms)[0m  [1m[35mALTER TABLE "cortex_content_types" ADD CONSTRAINT "fk_rails_60074af220"
FOREIGN KEY ("contract_id")
  REFERENCES "cortex_contracts" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "cortex_content_types" ADD CONSTRAINT "fk_rails_210f129915"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "cortex_content_types" ADD CONSTRAINT "fk_rails_db798ae410"
FOREIGN KEY ("creator_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (13.8ms)[0m  [1m[35mALTER TABLE "cortex_contentable_decorators" ADD CONSTRAINT "fk_rails_ba6a88b4e9"
FOREIGN KEY ("decorator_id")
  REFERENCES "cortex_decorators" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "cortex_contentable_decorators" ADD CONSTRAINT "fk_rails_6a305dd5e7"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "cortex_contracts" ADD CONSTRAINT "fk_rails_d7e02b8da3"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "cortex_decorators" ADD CONSTRAINT "fk_rails_d799512aaf"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (7.4ms)[0m  [1m[35mALTER TABLE "cortex_field_items" ADD CONSTRAINT "fk_rails_21cd780dfa"
FOREIGN KEY ("content_item_id")
  REFERENCES "cortex_content_items" ("id")
[0m
  [1m[35m (7.5ms)[0m  [1m[35mALTER TABLE "cortex_field_items" ADD CONSTRAINT "fk_rails_c8a7c76f32"
FOREIGN KEY ("field_id")
  REFERENCES "cortex_fields" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "cortex_fields" ADD CONSTRAINT "fk_rails_7b193fea4e"
FOREIGN KEY ("content_type_id")
  REFERENCES "cortex_content_types" ("id")
[0m
  [1m[35m (8.9ms)[0m  [1m[35mALTER TABLE "cortex_permissions_roles" ADD CONSTRAINT "fk_rails_83fc5ca812"
FOREIGN KEY ("permission_id")
  REFERENCES "cortex_permissions" ("id")
[0m
  [1m[35m (8.1ms)[0m  [1m[35mALTER TABLE "cortex_permissions_roles" ADD CONSTRAINT "fk_rails_837826ce44"
FOREIGN KEY ("role_id")
  REFERENCES "cortex_roles" ("id")
[0m
  [1m[35m (5.7ms)[0m  [1m[35mALTER TABLE "cortex_roles_users" ADD CONSTRAINT "fk_rails_b8b25dbcb7"
FOREIGN KEY ("role_id")
  REFERENCES "cortex_roles" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "cortex_roles_users" ADD CONSTRAINT "fk_rails_fd7eb9e6ab"
FOREIGN KEY ("user_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "cortex_tenants" ADD CONSTRAINT "fk_rails_484d1d2b2e"
FOREIGN KEY ("owner_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "cortex_tenants_users" ADD CONSTRAINT "fk_rails_9bd0ae910c"
FOREIGN KEY ("tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "cortex_tenants_users" ADD CONSTRAINT "fk_rails_3f3682131f"
FOREIGN KEY ("user_id")
  REFERENCES "cortex_users" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "cortex_users" ADD CONSTRAINT "fk_rails_a08c46d6e5"
FOREIGN KEY ("active_tenant_id")
  REFERENCES "cortex_tenants" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180118233014)[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180118233001),
(20180118233002),
(20180118233003),
(20180118233004),
(20180118233005),
(20180118233006),
(20180118233007),
(20180118233008),
(20180118233009),
(20180118233010),
(20180118233011),
(20180118233012),
(20180118233013),
(0),
(10),
(11),
(12),
(13),
(1),
(2),
(3),
(4),
(5),
(6),
(7),
(8),
(9);

[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-02-21 20:24:35.335695"], ["updated_at", "2018-02-21 20:24:35.335695"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2207846257810847325)[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2207846257810847325)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCortex::Tenant Load (0.8ms)[0m  [1m[34mSELECT  "cortex_tenants".* FROM "cortex_tenants" WHERE "cortex_tenants"."deleted_at" IS NULL AND "cortex_tenants"."name" = $1 LIMIT $2[0m  [["name", "System"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCortex::User Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "cortex_users" WHERE "cortex_users"."email" = $1 AND "cortex_users"."deleted_at" IS NULL LIMIT $2[0m  [["email", "admin@cortexcms.org"], ["LIMIT", 1]]
  [1m[36mCortex::Tenant Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "cortex_tenants" WHERE "cortex_tenants"."name" = $1 AND "cortex_tenants"."deleted_at" IS NULL LIMIT $2[0m  [["name", "System"], ["LIMIT", 1]]
  [1m[36mCortex::Tenant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "cortex_tenants" WHERE "cortex_tenants"."name_id" = $1 AND "cortex_tenants"."deleted_at" IS NULL LIMIT $2[0m  [["name_id", "system"], ["LIMIT", 1]]
  [1m[36mCortex::User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "cortex_users" WHERE "cortex_users"."email" = $1 AND "cortex_users"."deleted_at" IS NULL LIMIT $2[0m  [["email", "admin@cortexcms.org"], ["LIMIT", 1]]
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "cortex_users" ("email", "firstname", "lastname", "created_at", "updated_at", "encrypted_password") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "admin@cortexcms.org"], ["firstname", "Cortex"], ["lastname", "Admin"], ["created_at", "2018-02-21 20:31:06.906447"], ["updated_at", "2018-02-21 20:31:06.906447"], ["encrypted_password", "$2a$10$AUX8X9yOt2awz2825OcnfubcnymQkSs64M5qapi.zkcm.sv6loMvG"]]
  [1m[36mCortex::Tenant Load (0.2ms)[0m  [1m[34mSELECT  "cortex_tenants".* FROM "cortex_tenants" ORDER BY "cortex_tenants"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCortex::Tenant Load (0.1ms)[0m  [1m[34mSELECT  "cortex_tenants".* FROM "cortex_tenants" ORDER BY "cortex_tenants"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "cortex_tenants" ("name", "name_id", "description", "lft", "rgt", "owner_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "System"], ["name_id", "system"], ["description", "Core tenant for news/etc"], ["lft", 1], ["rgt", 2], ["owner_id", "e32b6510-0944-446e-9b02-5edc422137fb"], ["created_at", "2018-02-21 20:31:06.909608"], ["updated_at", "2018-02-21 20:31:06.909608"]]
  [1m[36mCortex::Tenant Load (0.2ms)[0m  [1m[34mSELECT  "cortex_tenants".* FROM "cortex_tenants" WHERE "cortex_tenants"."id" = $1 LIMIT $2[0m  [["id", "3bb36785-532a-4781-b2a4-835a8f93d19a"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "cortex_tenants" SET "depth" = 0 WHERE "cortex_tenants"."id" IN (SELECT "cortex_tenants"."id" FROM "cortex_tenants" WHERE "cortex_tenants"."deleted_at" IS NULL AND "cortex_tenants"."id" = '3bb36785-532a-4781-b2a4-835a8f93d19a' ORDER BY "cortex_tenants"."lft" ASC)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCortex::Tenant Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "cortex_tenants" WHERE "cortex_tenants"."name" = $1 AND "cortex_tenants"."deleted_at" IS NULL LIMIT $2[0m  [["name", "Example"], ["LIMIT", 1]]
  [1m[36mCortex::Tenant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "cortex_tenants" WHERE "cortex_tenants"."name_id" = $1 AND "cortex_tenants"."deleted_at" IS NULL LIMIT $2[0m  [["name_id", "example"], ["LIMIT", 1]]
  [1m[36mCortex::Tenant Load (0.2ms)[0m  [1m[34mSELECT  "cortex_tenants".* FROM "cortex_tenants" ORDER BY "cortex_tenants"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCortex::Tenant Load (0.3ms)[0m  [1m[37mSELECT  "cortex_tenants".* FROM "cortex_tenants" WHERE "cortex_tenants"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", "3bb36785-532a-4781-b2a4-835a8f93d19a"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "cortex_tenants" ("name", "name_id", "description", "lft", "rgt", "owner_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Example"], ["name_id", "example"], ["description", "ContentTypes to get started with"], ["lft", 3], ["rgt", 4], ["owner_id", "e32b6510-0944-446e-9b02-5edc422137fb"], ["created_at", "2018-02-21 20:31:06.923633"], ["updated_at", "2018-02-21 20:31:06.923633"]]
  [1m[36mCortex::Tenant Load (0.3ms)[0m  [1m[34mSELECT  "cortex_tenants".* FROM "cortex_tenants" WHERE "cortex_tenants"."id" = $1 LIMIT $2[0m  [["id", "7ecb7c09-4104-4431-91f2-b9bee97c6ad7"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "cortex_tenants" SET "depth" = 0 WHERE "cortex_tenants"."id" IN (SELECT "cortex_tenants"."id" FROM "cortex_tenants" WHERE "cortex_tenants"."deleted_at" IS NULL AND "cortex_tenants"."id" = '7ecb7c09-4104-4431-91f2-b9bee97c6ad7' ORDER BY "cortex_tenants"."lft" ASC)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCortex::Tenant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "cortex_tenants" WHERE "cortex_tenants"."name" = $1 AND "cortex_tenants"."deleted_at" IS NULL LIMIT $2[0m  [["name", "Bogus"], ["LIMIT", 1]]
  [1m[36mCortex::Tenant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "cortex_tenants" WHERE "cortex_tenants"."name_id" = $1 AND "cortex_tenants"."deleted_at" IS NULL LIMIT $2[0m  [["name_id", "bogus"], ["LIMIT", 1]]
  [1m[36mCortex::Tenant Load (0.2ms)[0m  [1m[34mSELECT  "cortex_tenants".* FROM "cortex_tenants" ORDER BY "cortex_tenants"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCortex::Tenant Load (0.2ms)[0m  [1m[37mSELECT  "cortex_tenants".* FROM "cortex_tenants" WHERE "cortex_tenants"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", "7ecb7c09-4104-4431-91f2-b9bee97c6ad7"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "cortex_tenants" ("name", "name_id", "description", "parent_id", "lft", "rgt", "owner_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["name", "Bogus"], ["name_id", "bogus"], ["description", "Example subtenant"], ["parent_id", "7ecb7c09-4104-4431-91f2-b9bee97c6ad7"], ["lft", 5], ["rgt", 6], ["owner_id", "e32b6510-0944-446e-9b02-5edc422137fb"], ["created_at", "2018-02-21 20:31:06.931868"], ["updated_at", "2018-02-21 20:31:06.931868"]]
  [1m[36mCortex::Tenant Load (0.2ms)[0m  [1m[34mSELECT  "cortex_tenants".* FROM "cortex_tenants" WHERE "cortex_tenants"."id" = $1 ORDER BY "cortex_tenants"."lft" ASC LIMIT $2[0m  [["id", "7ecb7c09-4104-4431-91f2-b9bee97c6ad7"], ["LIMIT", 1]]
  [1m[36mCortex::Tenant Load (0.2ms)[0m  [1m[37mSELECT  "cortex_tenants".* FROM "cortex_tenants" WHERE "cortex_tenants"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", "8c55071e-a911-4deb-bde8-597ab6bd9c6c"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "cortex_tenants" SET "lft" = CASE WHEN "lft" BETWEEN 4 AND 4 THEN "lft" + 6 - 4 WHEN "lft" BETWEEN 5 AND 6 THEN "lft" + 4 - 5 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 4 AND 4 THEN "rgt" + 6 - 4 WHEN "rgt" BETWEEN 5 AND 6 THEN "rgt" + 4 - 5 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = '8c55071e-a911-4deb-bde8-597ab6bd9c6c' THEN '7ecb7c09-4104-4431-91f2-b9bee97c6ad7' ELSE "parent_id" END, updated_at = '2018-02-21 20:31:06.937061' WHERE "cortex_tenants"."id" IN (SELECT "cortex_tenants"."id" FROM "cortex_tenants" WHERE ("cortex_tenants"."lft" BETWEEN 4 AND 6 OR "cortex_tenants"."rgt" BETWEEN 4 AND 6) ORDER BY "cortex_tenants"."lft" ASC)[0m
  [1m[36mCortex::Tenant Load (0.2ms)[0m  [1m[37mSELECT  "cortex_tenants".* FROM "cortex_tenants" WHERE "cortex_tenants"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", "7ecb7c09-4104-4431-91f2-b9bee97c6ad7"], ["LIMIT", 1]]
  [1m[36mCortex::Tenant Load (0.2ms)[0m  [1m[34mSELECT  "cortex_tenants".* FROM "cortex_tenants" WHERE "cortex_tenants"."id" = $1 LIMIT $2[0m  [["id", "8c55071e-a911-4deb-bde8-597ab6bd9c6c"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "cortex_tenants" WHERE "cortex_tenants"."deleted_at" IS NULL AND ("cortex_tenants"."lft" <= 4) AND ("cortex_tenants"."rgt" >= 5) AND ("cortex_tenants"."id" != '8c55071e-a911-4deb-bde8-597ab6bd9c6c')[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "cortex_tenants" SET "depth" = 1 WHERE "cortex_tenants"."id" IN (SELECT "cortex_tenants"."id" FROM "cortex_tenants" WHERE "cortex_tenants"."deleted_at" IS NULL AND "cortex_tenants"."id" = '8c55071e-a911-4deb-bde8-597ab6bd9c6c' ORDER BY "cortex_tenants"."lft" ASC)[0m
  [1m[36mCortex::Tenant Load (0.2ms)[0m  [1m[37mSELECT  "cortex_tenants".* FROM "cortex_tenants" WHERE "cortex_tenants"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", "8c55071e-a911-4deb-bde8-597ab6bd9c6c"], ["LIMIT", 1]]
  [1m[36mCortex::Tenant Load (0.2ms)[0m  [1m[34mSELECT  "cortex_tenants".* FROM "cortex_tenants" WHERE "cortex_tenants"."id" = $1 LIMIT $2[0m  [["id", "8c55071e-a911-4deb-bde8-597ab6bd9c6c"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "cortex_tenants" WHERE "cortex_tenants"."deleted_at" IS NULL AND ("cortex_tenants"."lft" <= 4) AND ("cortex_tenants"."rgt" >= 5) AND ("cortex_tenants"."id" != '8c55071e-a911-4deb-bde8-597ab6bd9c6c')[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "cortex_tenants" SET "depth" = 1 WHERE "cortex_tenants"."id" IN (SELECT "cortex_tenants"."id" FROM "cortex_tenants" WHERE "cortex_tenants"."deleted_at" IS NULL AND "cortex_tenants"."id" = '8c55071e-a911-4deb-bde8-597ab6bd9c6c' ORDER BY "cortex_tenants"."lft" ASC)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "cortex_contracts" ("name", "tenant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Bogus"], ["tenant_id", "3bb36785-532a-4781-b2a4-835a8f93d19a"], ["created_at", "2018-02-21 20:31:06.948293"], ["updated_at", "2018-02-21 20:31:06.948293"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCortex::Tenant Load (0.5ms)[0m  [1m[34mSELECT "cortex_tenants".* FROM "cortex_tenants" INNER JOIN "cortex_tenants_users" ON "cortex_tenants"."id" = "cortex_tenants_users"."tenant_id" WHERE "cortex_tenants"."deleted_at" IS NULL AND "cortex_tenants_users"."user_id" = $1[0m  [["user_id", "e32b6510-0944-446e-9b02-5edc422137fb"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCortex::User Load (0.2ms)[0m  [1m[34mSELECT  "cortex_users".* FROM "cortex_users" WHERE "cortex_users"."deleted_at" IS NULL AND "cortex_users"."id" = $1 LIMIT $2[0m  [["id", "e32b6510-0944-446e-9b02-5edc422137fb"], ["LIMIT", 1]]
  [1m[36mCortex::Tenant Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "cortex_tenants" WHERE "cortex_tenants"."name" = $1 AND "cortex_tenants"."deleted_at" IS NULL AND ("cortex_tenants"."id" != $2) LIMIT $3[0m  [["name", "System"], ["id", "3bb36785-532a-4781-b2a4-835a8f93d19a"], ["LIMIT", 1]]
  [1m[36mCortex::Tenant Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "cortex_tenants" WHERE "cortex_tenants"."name_id" = $1 AND "cortex_tenants"."deleted_at" IS NULL AND ("cortex_tenants"."id" != $2) LIMIT $3[0m  [["name_id", "system"], ["id", "3bb36785-532a-4781-b2a4-835a8f93d19a"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "cortex_tenants" SET "depth" = $1, "updated_at" = $2 WHERE "cortex_tenants"."id" = $3[0m  [["depth", 0], ["updated_at", "2018-02-21 20:31:07.003520"], ["id", "3bb36785-532a-4781-b2a4-835a8f93d19a"]]
  [1m[36mCortex::Tenant Load (0.2ms)[0m  [1m[34mSELECT  "cortex_tenants".* FROM "cortex_tenants" WHERE "cortex_tenants"."id" = $1 LIMIT $2[0m  [["id", "3bb36785-532a-4781-b2a4-835a8f93d19a"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "cortex_tenants" SET "depth" = 0 WHERE "cortex_tenants"."id" IN (SELECT "cortex_tenants"."id" FROM "cortex_tenants" WHERE "cortex_tenants"."deleted_at" IS NULL AND "cortex_tenants"."id" = '3bb36785-532a-4781-b2a4-835a8f93d19a' ORDER BY "cortex_tenants"."lft" ASC)[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "cortex_tenants_users" ("tenant_id", "user_id") VALUES ($1, $2)[0m  [["tenant_id", "3bb36785-532a-4781-b2a4-835a8f93d19a"], ["user_id", "e32b6510-0944-446e-9b02-5edc422137fb"]]
  [1m[36mCortex::User Load (0.2ms)[0m  [1m[34mSELECT  "cortex_users".* FROM "cortex_users" WHERE "cortex_users"."deleted_at" IS NULL AND "cortex_users"."id" = $1 LIMIT $2[0m  [["id", "e32b6510-0944-446e-9b02-5edc422137fb"], ["LIMIT", 1]]
  [1m[36mCortex::Tenant Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "cortex_tenants" WHERE "cortex_tenants"."name" = $1 AND "cortex_tenants"."deleted_at" IS NULL AND ("cortex_tenants"."id" != $2) LIMIT $3[0m  [["name", "Example"], ["id", "7ecb7c09-4104-4431-91f2-b9bee97c6ad7"], ["LIMIT", 1]]
  [1m[36mCortex::Tenant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "cortex_tenants" WHERE "cortex_tenants"."name_id" = $1 AND "cortex_tenants"."deleted_at" IS NULL AND ("cortex_tenants"."id" != $2) LIMIT $3[0m  [["name_id", "example"], ["id", "7ecb7c09-4104-4431-91f2-b9bee97c6ad7"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "cortex_tenants" SET "depth" = $1, "updated_at" = $2 WHERE "cortex_tenants"."id" = $3[0m  [["depth", 0], ["updated_at", "2018-02-21 20:31:07.017041"], ["id", "7ecb7c09-4104-4431-91f2-b9bee97c6ad7"]]
  [1m[36mCortex::Tenant Load (0.2ms)[0m  [1m[34mSELECT  "cortex_tenants".* FROM "cortex_tenants" WHERE "cortex_tenants"."id" = $1 LIMIT $2[0m  [["id", "7ecb7c09-4104-4431-91f2-b9bee97c6ad7"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "cortex_tenants" SET "depth" = 0 WHERE "cortex_tenants"."id" IN (SELECT "cortex_tenants"."id" FROM "cortex_tenants" WHERE "cortex_tenants"."deleted_at" IS NULL AND "cortex_tenants"."id" = '7ecb7c09-4104-4431-91f2-b9bee97c6ad7' ORDER BY "cortex_tenants"."lft" ASC)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "cortex_tenants_users" ("tenant_id", "user_id") VALUES ($1, $2)[0m  [["tenant_id", "7ecb7c09-4104-4431-91f2-b9bee97c6ad7"], ["user_id", "e32b6510-0944-446e-9b02-5edc422137fb"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
