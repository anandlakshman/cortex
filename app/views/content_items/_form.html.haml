- require Rails.root.join('lib/cortex/field_types/core/tree/tree_cell.rb') # I know, I know, this is terrible, but it's just until I get autoloading working

= form_for [@content_type, @content_item] do |form|
  = form.hidden_field :creator_id, value: current_user.id
  = form.hidden_field :content_type_id, value: @content_type.id
  -# = cell('wizard', @wizard, context: { content_item: @content_item, form: form }).(:show)
  - @content_type.fields.each_with_index do |field, index|
    = form.fields_for 'field_items', field do |field_item_form|
      - if field.field_type == "text_field_type"
        = cell('cortex/field_types/core/text/text', FieldItem.new(field: field), form: field_item_form, default_value: '').(:input)
      - if field.field_type == "boolean_field_type"
        = cell('cortex/field_types/core/boolean/boolean', FieldItem.new(field: field), form: field_item_form, default_value: false).(:checkbox)
      - if field.field_type == "tree_field_type"
        = cell('cortex/field_types/core/tree/tree', FieldItem.new(field: field), form: field_item_form, index: index).(:tree)
  .mdl-grid
    .mdl-cell.mdl-cell--12-col
      = form.submit 'Submit', class: 'mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect'
      = link_to 'Cancel', content_type_content_items_path(@content_type), class: 'mdl-button mdl-js-button mdl-js-ripple-effect'
